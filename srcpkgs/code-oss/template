# Template file for 'vscode'
pkgname=vscode
version=1.74.3
revision=1
_electronver=19.0.8
_npmver=8.6.0
hostmakedepends="pkg-config python3 nodejs yarn tar git ripgrep"
makedepends="libxkbfile-devel libsecret-devel libxml2-devel ncurses-devel electron19"
depends="libXtst ncurses nss dejavu-fonts-ttf xdg-utils ripgrep electron19"
short_desc="Microsoft Code for Linux"
maintainer="shizonic <realtiaz@gmail.com>, Alex Lohr <alex.lohr@logmein.com>"
license="MIT"
homepage="https://code.visualstudio.com/"
distfiles="https://github.com/microsoft/vscode/archive/refs/tags/${version}.tar.gz"
checksum=f3db2b1132977ddd0309e7c3da5c594a5d77bc423d5e64b3c9900890a43be9ac
nocross=yes # x64 build does not cut it, it contains native code

do_build() {
	yarn install --frozen-lockfile --arch=x64
	#export CFLAGS="$CFLAGS -I/usr/include/node"
	yarn run gulp vscode-linux-x64-min
}
